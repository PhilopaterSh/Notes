

# **SEC-103: Ethical Hacking and Penetration testing**

The SEC-103: Ethical Hacking and Penetration Testing diploma is designed to equip learners with the practical skills and technical knowledge required to identify, exploit, and mitigate security vulnerabilities across network, web, and Active Directory environments.
The program is carefully structured to combine foundational theory with intensive hands-on practice, preparing students for real-world penetration testing scenarios and professional roles in the cybersecurity field.

**Course Objectives**
• Master the fundamentals of networking, web technologies, and Active Directory environments.
• Gain proficiency in industry-standard penetration testing tools and methodologies.
• Conduct comprehensive network, web application, and Active Directory security assessments.
• Develop advanced exploitation techniques and simulate real-world adversary tactics.
• Produce detailed security assessment reports with actionable remediation strategies.

**Benefits of Enrolling in this Course**

**•** **Hands-On Experience:** Work on real-world labs and scenarios using platforms such as TryHackMe and PortSwigger.
**•** **Comprehensive** **Curriculum:** Cover all key areas of penetration testing from fundamental concepts to advanced exploitation techniques.
**•** **Career Readiness:** Acquire the practical skills and knowledge to work as a professional penetration tester specializing in network, web, and Active Directory security.
**•** **Expert Instruction:** Learn directly from cybersecurity professionals with extensive industry experience.

**•** **Certification Preparation:** Build a strong foundation to pursue globally recognized ethical hacking and penetration testing certifications.

**Deliv*ery F*ormat**

•      15 Theoretical Lectures × 3 hours each –Covering essential concepts, attack methodologies, and exploitation techniques.
•    15 Practical Lab Sessions × 2 hours each – Hands-on exercises simulating real-world

offensive and defensive security operations.

**Course** **Assessment**
All components are mandatory and contribute to the final grade.

|                      |           |
| -------------------- | --------- |
| **Component**        | **Marks** |
| •    6th Week Exam   | 10        |
| •    11th Week Exam  | 10        |
| •    Final Exam      | 40        |
| •    Module Projects | 30        |
| •    Tasks           | 15        |
| **Total**            | **100**   |

**Part** **1: Network Penetration Testing**

**Module Description**

This module focuses on the essential techniques, methodologies, and tools used in network penetration testing. Participants will learn how to conduct effective information gathering, perform network scanning, identify and exploit vulnerabilities, and execute post-exploitation activities to maintain access and further assess the network’s security posture.

**Module Objectives**
•  Execute in-depth network reconnaissance and enumeration to identify potential attack surfaces.
•  Exploit network vulnerabilities using industry-standard tools and custom attack techniques.
•  Perform advanced post-exploitation operations, including maintaining access, pivoting, and lateral.

-------------------------------------------------------------------------

**Week 1 – Introduction to Networking & Penetration Testing**
•     Fundamentals of computer networks: protocols, layers, and topologies
•     Introduction to penetration testing: scope, methodology, and legal considerations
•    Ethical hacking vs. malicious hacking
•     Penetration testing phases and frameworks

**Week 2 – Reconnaissance & Vulnerability Scanning**
•    Active vs. passive reconnaissance techniques
•    Information gathering from public and internal sources
•    Network mapping and service enumeration
•    Vulnerability scanning tools and methodologies (e.g., Nmap, Nessus)

**Week 3 – Exploitation & Post-Exploitation**
•    Exploitation fundamentals: identifying and leveraging vulnerabilities
•    Using Metasploit and manual exploitation techniques
•    Privilege escalation strategies
•     Post-exploitation objectives: data exfiltration, lateral movement, and persistence setup

**Week 4 – Maintaining Access & Covering Tracks**
•    Persistence techniques for maintaining access to compromised systems
•     Backdoors, scheduled tasks, and registry-based persistence methods
•    Log tampering, artifact removal, and anti-forensics techniques
•    Best practices for avoiding detection during and after attacks

**Part** **2: Active Directory Penetration Testing**

**Module Description**

This module provides in-depth knowledge and hands-on experience in Active Directory (AD) penetration testing. Participants will learn how to identify, exploit, and mitigate vulnerabilities within AD environments. The module covers key concepts of AD architecture, enumeration, exploitation, and post-exploitation techniques, including advanced attacks such as Golden Ticket and Silver Ticket.

**Module Objectives**
•  Gain a comprehensive understanding of Active Directory architecture and components.
•  Perform effective reconnaissance and enumeration within AD environments.
•  Exploit vulnerabilities and conduct post-exploitation operations in AD.
•  Apply defensive strategies and respond effectively to AD-related security incidents.

----------------------------------------------------------------------------------------------------------------------------

**Week 5: Introduction to Active Directory.**
•    Understanding domains, forests, and organizational units (OUs) within AD.
•    Common vulnerabilities and attack vectors in Active Directory environments.

**Week 6: Reconnaissance and Enumeration in Active Directory**
•   Techniques and methodologies for Active Directory (AD) reconnaissance and enumeration.
•   Identifying and mapping AD objects, users, groups, and permissions.
•    Practical use of enumeration tools such as BloodHound and PowerView.

**Week 7: Exploiting Active Directory Vulnerabilities**
•   Exploiting common AD vulnerabilities such as Kerberoasting and Pass-the-Hash.
•   Privilege escalation techniques in Active Directory environments.
•   Credential dumping using tools like Mimikatz.

**Week 8: Advanced AD Attacks and Defensive Measures**
•   **Golden Ticket Attack:**
▪    Concept and mechanics of Golden Tickets.
▪    Creating and using Golden Tickets for persistent domain access.

•   **Silver Ticket Attack:**
▪    Concept and mechanics of Silver Tickets.
▪    Creating and using Silver Tickets for service-level access.

• **Maintaining Access:**
▪    Techniques for maintaining persistence in AD environments.
▪    Covering tracks to evade detection.
•   **Defensive** **Measures:**
▪    Best practices for securing Active Directory.
▪    Monitoring and detection techniques for AD-based attacks.

**Part** 3: Web Application Penetration Testing**

**Module Description**

This module provides an in-depth exploration  of web application penetration testing methodologies and offensive techniques. Participants will learn how to perform systematic reconnaissance and information gathering, identify and exploit critical vulnerabilities, and assess the security posture of modern web applications. Emphasis is placed on exploiting weaknesses in authentication and session management, input validation, and business logic, as well as bypassing access controls and chaining vulnerabilities for deeper compromise.

**Module Objectives**
•     Conduct comprehensive reconnaissance and information gathering on web applications.
•      Identify and exploit vulnerabilities in authentication, session management, and input validation mechanisms.
•    Analyze and exploit business logic flaws and access control weaknesses in web applications.

**Week 9 – Introduction to Web Applications**
•     Fundamentals of web applications and the HTTP protocol.
•    DNS concepts and their role in web application security.
•    Web application information gathering methodologies.

**Week 10 – Injection Attacks and Database Exploitation**
•     Introduction to MySQL and database fundamentals
•    SQL Injection (SQLi): detection techniques, exploitation methods, and mitigation strategies
•     Command Injection: exploiting system-level command execution vulnerabilities

**Week 11 – Path Traversal, Authentication, and Access Control**
•    Path Traversal: exploiting improper path handling to access restricted files
•     Authentication vulnerabilities: bypassing and exploiting weak authentication mechanisms
•    Broken Access Control: vertical and horizontal privilege escalation techniques

**Week 12 – Client-Side Attacks: XSS and Clickjacking**
•     Cross-Site Scripting (XSS): types (reflected, stored, DOM-based), exploitation, and prevention
•    Clickjacking: techniques, real-world impact, and mitigation strategies

**Week 13 – SSRF and CSRF Attacks**
•    Server-Side Request Forgery (SSRF): reconnaissance, exploitation, and chaining
•     Cross-Site Request Forgery (CSRF): exploitation scenarios and defense mechanisms

**Week 14 – Business Logic Vulnerabilities & IDOR**
•    Business Logic Vulnerabilities: manipulating workflows and logic to gain unauthorized access
•     Insecure Direct Object Reference (IDOR): exploitation and mitigation strategies

**Week 15 – CORS Misconfigurations & Client-Side File Upload Exploitation**
•    CORS Misconfigurations: identifying insecure policies and exploiting trust relationships
•     Client-side File Upload: bypassing client-side validation to deliver malicious payloads



# Lecture 1 - Ethical Hacking Introduction
- **Ethical hacking** is an authorized attempt to gain unauthorized access to a computer system, application, or data using the strategies and actions of malicious attackers.
- Confidentiality: Protecting data from unauthorized access and disclosure. 
- Integrity: Ensuring data remains accurate, consistent, and unaltered. 
- Availability: Guaranteeing systems and data are accessible when needed.
- Understanding the Attack Lifecycle (Cyber Kill-Chain): 
	- Reconnaissance 
	- Scanning 
	- Gaining access 
	- Maintaining Access 
	- Covering Tracks
- **Reconnaissance** is the initial phase of the attack lifecycle where attackers gather information about the target.
- **Scanning** is the phase where attackers identify vulnerabilities and weaknesses in the target system or network.
- **Gaining Access** is the phase where attackers exploit vulnerabilities to gain unauthorized access to the target system or network.
- **Maintaining Access** is the phase where attackers establish persistence within the target system to maintain access even after initial access has been achieved.
- **Covering Tracks** is the phase where attackers attempt to remove evidence of their intrusion to avoid detection.
-----
- **Red teaming** is a comprehensive security assessment methodology that simulates real-world attacks to evaluate an organization's security posture.
- **Penetration testing** focuses on identifying and exploiting vulnerabilities to assess security controls and provide recommendations for improvement.
- The purpose of red teaming is to identify vulnerabilities and weaknesses **across people**, processes, and technology, enabling organizations to enhance their defenses proactively.
---
Network:
- IPv4 (32-bit).
- IPv6 (128-bit).
- APIPA: 169.254.x.x → (Automatic Private IP, assigned when DHCP fails).
- Loopback: 127.0.0.1 → Refers to the local system
- MAC (Media Access Control)  
	  A 48-bit (6-byte) address that uniquely identifies a network device.
---
 TCP (Connection-Oriented):
- Connection Establishment (3-way handshake)
- Connection Termination (4-way Handshake)
	- FIN → ACK → FIN → ACK process ensures proper connection closure.
-  Ensures ordered and complete data delivery. 
-  Retransmits lost packets. TCP 
-  Uses congestion and flow control to prevent overload.
----
UDP (Connectionless):
-  Low latency – No handshake, no waiting for ACKs.
-  No retransmission – Faster but unreliable. 
-  Used for real-time applications where speed is more important than accuracy.
---
Section Introduction to Networking & Penetration Testing:
- Use the hashing tools: [Online hash calculator - Online tools](https://www.tools4noobs.com/online_tools/hash/)
- **Shell** is a linux term for the interactive user interface with an operating system. ![[Pasted image 20260124134343.png]]


- Absolute path
- Relative path
Three types of users accounts in Linux
- Root user has administrative privileges.
- Regular user 
- Service user Linux is widely used as a server OS.
---
# Lecture 2
- Reconnaissance & Vulnerability Scanning
	- Reconnaissance = information gathering phase of ethical hacking.
	- Vulnerability scanning = identifying security weaknesses.
- **Passive reconnaissance** is collecting information about a target without direct interaction, reducing the chance of detection.
	- Common tools include Shodan, theHarvester, Maltego, Google Dorking, and Have I Been Pwned, helping attackers or testers map a target’s digital footprint safely.
-  **Active reconnaissance** is directly interacting with a target’s systems to gather detailed data, such as open ports, services, and vulnerabilities.
	- Examples include port scanning, service enumeration, and vulnerability scanning using tools like Nmap, Nessus, OpenVAS, Netcat, Metasploit, and Dirbuster.
# Lecture 3 Exploitation & Post Exploitation
- Exploitation: Using identified vulnerabilities to gain access to a system. 
- Post-Exploitation: Actions after access (maintain control, extract data, escalate privileges).
- TOOLS
	- Windows: WinPEAS, PowerUp, Seatbelt, Mimikatz 
	- Linux: LinPEAS, LinEnum, GTFOBins, pspy
- Windows Privileges Escalation
	- Service Misconfigurations
		- Unquoted Service Path: 
			- Check: sc qc
	- Weak File Permissions: 
		- Check with: icacls C:\Path\service.exe
	- Registry Misconfigurations - AlwaysInstallElevated
		- Check: 
			- reg query HKLM\Software\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated 
			- reg query HKCU\Software\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated
	- Exploiting Vulnerabilities
		- Kernel exploits
		- SeImpersonatePrivilege
		- DLL Hijacking: malicious DLL loaded instead of legitimate one
	- **Credential Dumping**
		- SAM & SYSTEM files: تحتوي على كلمات مرور المستخدمين بشكل مشفر. إذا تمكن المهاجم من نسخها، يمكنه محاولة فك التشفير لاحقًا.
			- Location: C:\Windows\System32\config\SAM 
				- Extract with reg save: 
					- reg save HKLM\SAM sam.save 
					- reg save HKLM\SYSTEM system.save
		-  Dump LSASS process:  هي عملية في ويندوز تحفظ بيانات تسجيل الدخول في الذاكرة. المهاجم قد يقوم بعمل "Dump" لها (نسخ محتواها) ثم يستخدم أدوات مثل Mimikatz لاستخراج كلمات المرور.
			- tasklist /fi "imagename eq lsass.exe"
			- procdump64.exe -ma lsass.exe lsass.dmp 
			- Extract with Mimikatz: 
				- sekurlsa::minidump lsass.dmp 
				- sekurlsa::logonpasswords
	- Scheduled Task Abuse 
		  Check tasks: schtasks /query /fo LIST /v
	- Persistence
		- Startup folder: C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup
		- Registry Run keys: HKCU\Software\Microsoft\Windows\CurrentVersion\Run
		- Creating malicious services. 
			- Attacker creates a new Windows service 
			- Service is configured to start automatically
- Linux Privileges Escalation
	- Enumeration Commands: 
		- id → shows UID, GID. 
		- ==uname -a → kernel version.== 
		- sudo -l → shows allowed sudo commands. 
		- ls -la /etc/sudoers → check misconfigurations.
	- Sudo Misconfigurations: 
		- Example: 
			  sudo-l
			  Output: (ALL) NOPASSWD:
				   /usr/bin/vim 
					    Exploit: ==sudo vim -c '!sh'== → Root shell.
    - SUID/SGID Exploits
	    - Find SUID files:
		    - ==find / -perm -4000 2>/dev/null== 
			    - Example (from GTFOBins):
				     ==./find . -exec /bin/sh \; -quit==
    - Cron Jobs Exploits:  	إذا كان سكربت يُشغَّل بواسطة root وكان قابلًا للكتابة من مستخدم عادي → يمكن للمهاجم إدخال أوامر خبيثة.
	    - Check cron jobs: 
		    - cat /etc/crontab  
    - Wildcard injection example: 
	    - ==tar -cf * --checkpoint=1 --checkpoint-action=exec=/bin/sh==
    - File Permission Exploits: 
	    - Writable /etc/passwd: 
		    - openssl passwd -1 mypassword 
	    - Add new user entry with UID 0. ==> Root
    - Kernel Exploits
    - Credential Harvesting 
	    - SSH keys: `/home//.ssh/id_rsa`. 
	    - Shell history: `~/.bash_history`. 
	    - Config files: `config.php`, `.git-credentials`
    - Persistence
	    - Add new user in `/etc/passwd`. 
	    - Plant attacker’s SSH public key in `/root/.ssh/authorized_keys`. 
	    - Create malicious cron job.
---
### Defense & Blue Teaming
	•Hardening Strategies 
		• Apply patches quickly. 
		• Follow Least Privilege principle. 
		• Remove unnecessary software. 
	• Monitoring & Logging 
		• Windows: Sysmon, Event Viewer. 
		• Linux: Auditd, syslog. 
	• Incident Response 
		• Monitor for LSASS access (Windows). 
		• Detect unusual cron jobs (Linux). 
	• Best Practices 
		• Segmentation of systems 
		• Use SIEM for log correlation. 
		• Regular penetration testing.
---
### Post-Exploitation Activities
- Maintaining Access: Persistence methods (registry keys, cron jobs, webshells, scheduled tasks).
- Data Exfiltration: Stealing sensitive files, emails, databases. 
- Credential Harvesting: Dumping hashes, keylogging, extracting password stores.
- Lateral Movement: Moving across network (Pass-the-Hash, Pass-the-Ticket, RDP hijacking).
- Pivoting: ![[Pasted image 20260125202859.png]]
- Covering Tracks: Clearing logs, timestomping, disabling defenses.
- Tools: Mimikatz, BloodHound, CrackMapExec, Empire, Cobalt Strike.
---
# Lecture 4 Maintaining Access & Covering Tracks
- **Backdoors**
	- Definition: Malicious programs or modifications that allow attackers to bypass normal authentication. 
	- Types of Backdoors: 
		- Application backdoors (e.g., webshells in PHP/ASP). 
		- System backdoors (modifying system binaries, trojans). 
		- Hardware/firmware backdoors. 
	- Tools/Examples: Netcat, Weevely, China Chopper, Cobalt Strike beacons. 
	- Defense: File integrity monitoring, EDR solutions.



### TryHackMe
1. What is Networking? https://tryhackme.com/room/whatisnetworking 
2. Networking Concepts https://tryhackme.com/room/networkingconcepts 
3. Introductory Networking https://tryhackme.com/room/introtonetworking 
4. Pentesting Fundamentals https://tryhackme.com/room/pentestingfundamentals 
5. Linux Fundamentals Part 1 https://tryhackme.com/room/linuxfundamentalspart1 
6. Vulnerabilities 101 https://tryhackme.com/room/vulnerabilities101 
7. Exploit Vulnerabilities https://tryhackme.com/room/exploitingavulnerabilityv2 
8. Vulnerability Capstone https://tryhackme.com/room/vulnerabilitycapstone
9. Passive Reconnaissance https://tryhackme.com/room/passiverecon
10. Active Reconnaissance https://tryhackme.com/room/activerecon 
11. Search Skills https://tryhackme.com/room/searchskills 
12. Shodan.io https://tryhackme.com/room/shodan 
13. SoMeSINT https://tryhackme.com/room/somesint
14. Nmap Live Host Discovery https://tryhackme.com/room/nmap01 
15. Metasploit: Introduction https://tryhackme.com/room/metasploitintro

# #Nots
Which came first: OSI or TCP/IP?
	==TCP/IP is older. & OSI came later.==
MAC Address Table (Switch).
	This table maps each MAC address to the port where the device with that MAC is connected.
	What gets recorded?
		The switch records the **Source MAC Address** of frames, ==not== **the destination**.
SMB 
	Port 139 (NetBIOS Session Service)
		NetBIOS: Network Basic Input/Output System.
	Port 445 (Direct SMB over TCP/IP)
Lateral movement vs Pivoting
	Lateral movement : من جهاز لجهاز
	Pivoting : من نتروك لاخر
`scp` (secure copy) is a command-line utility that uses SSH to securely transfer files between devices.
	scp [options] <source_path> <user>@<remote_host>:<destination_path>
Krasukha-4 & Murmansk-BN نظام تشويش

# VMware
### VulnHub
[Metasploitable: 2](https://www.vulnhub.com/entry/metasploitable-2,29/)

### Windows vm
https://windowstan.com/
### BlackArch
[Downloads BlackArch](https://www.blackarch.org/downloads.html)
The default login for all ISOs and OVA is: **root:blackarch**

### Parrotsec
[Parrot Security](https://www.parrotsec.org/download/)
Default credentials:
user: **user**  
password: **parrot**

# Books Ethical Hacking :
 https://drive.google.com/drive/folders/1_JgqLoT2e2Kiw7bbHk2utljVRQv7ajSa

Linkedin: https://www.linkedin.com/in/abdelrhmanorafy/
## Tools
### Metasploit
	[Modules | Metasploit Documentation Penetration Testing Software, Pen Testing Security](https://docs.metasploit.com/docs/modules.html)
### Nessus Professional
[Nessus_Professional](https://github.com/xiv3r/Nessus_Professional)
	Access your Nessus:  https://localhost:11127/ (or your VPS IP)
                             username: admin
                             password: 1234567890
### Hash Calculation

